(window.webpackJsonp=window.webpackJsonp||[]).push([[225],{1431:function(t,e,n){"use strict";n.r(e);var a=n(46),r=n.n(a),i=n(10),c=n(1),s=n(0),o=n(2),u=n(76),l=n(18),d=n(70),p=n(24),g=n(83),f=n(11),j=n(52),m=n.n(j),b=n(33),h=(n(43),n(116),n(108),n(62),n(119),n(87),n(100),n(122),n(61),n(86)),v=(n(121),n(58),n(118),n(120),n(39),n(44)),O=n(34);function x(){var t=S(["\n\t\t\tquery AllPages {\n\t\t\t\tallPages {\n\t\t\t\t\t_label_\n\t\t\t\t\tid\n\t\t\t\t\tpageTitle\n\t\t\t\t\tisOrphaned\n\t\t\t\t\tpackageName\n\t\t\t\t}\n\t\t\t}\n\t\t"]);return x=function(){return t},t}function y(){var t=S(["\n\t\tmutation CreatePage($pkgName: PagePackageNameType!) {\n\t\t\tcreatePage(data: { packageName: $pkgName }) {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t"]);return y=function(){return t},t}function k(t,e,n,a,r,i,c){try{var s=t[i](c),o=s.value}catch(t){return void n(t)}s.done?e(o):Promise.resolve(o).then(a,r)}function w(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function c(t){k(i,a,r,c,s,"next",t)}function s(t){k(i,a,r,c,s,"throw",t)}c(void 0)}))}}function P(){var t=S(["\n\t\tmutation ChangePackageName($id: ID!, $pkgName: PagePackageNameType!) {\n\t\t\tupdatePage(id: $id, data: { packageName: $pkgName }) {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t"]);return P=function(){return t},t}function N(){var t=S(["\n\t\tmutation DeletePage($id: ID!) {\n\t\t\tdeletePage(id: $id) {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t"]);return N=function(){return t},t}function S(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(a=(c=s.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $={name:"1hjq20a",styles:"width:320px;"};function C(t){var e=t.item,n=t.refetch,a=t.items,p=Object(v.a)(),j=p.getListByKey("Page"),O=j.fields.find((function(t){return"packageName"===t.path})).options,x=T(Object(s.useState)(!1),2),y=x[0],k=x[1],S=T(Object(s.useState)(!1),2),C=S[0],D=S[1],A=T(Object(b.a)(m()(N())),1)[0],z=T(Object(b.a)(m()(P())),1)[0];return Object(c.jsx)(d.c,null,(function(t){var s=t.history;return Object(c.jsx)(u.a,{css:$},Object(c.jsx)(l.d,{css:Object(i.a)({marginBottom:2*o.d},"")},e.packageName),Object(c.jsx)(g.a,{css:Object(i.a)({marginBottom:2*o.d},""),placeholder:"Select a new package for these docs",options:O,isLoading:C,isDisabled:C,onChange:function(){var t=w(r.a.mark((function t(n){var i,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.value,D(!0),void 0===(c=a.find((function(t){return t.packageName===i})))){t.next=6;break}return t.next=6,A({variables:{id:c.id}});case 6:return t.next=8,z({variables:{pkgName:i,id:e.id}});case 8:s.push("".concat(p.adminPath,"/pages/").concat(e.id));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),Object(c.jsx)(f.a,{to:"".concat(p.adminPath,"/pages/").concat(e.id),css:Object(i.a)({marginRight:o.d},"")},"Edit"),Object(c.jsx)(f.a,{appearance:"danger",onClick:function(){k(!0)}},"Delete"),Object(c.jsx)(h.a,{item:e,onClose:function(){k(!1)},onDelete:function(){var t=w(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return k(!1),t.next=3,e;case 3:n();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),list:j,isOpen:y}))}))}function D(t){var e=t.items,n=t.refetch;return Object(c.jsx)(s.Fragment,null,"Pages below relate to packages that have been deleted or renamed. Please decide what should happen to the pages.",Object(c.jsx)(p.d,{columns:3,css:Object(i.a)({marginTop:2*o.d},""),gap:2*o.d},e.map((function(t){return Object(c.jsx)(C,{items:e,key:t.id,refetch:n,item:t})}))))}var A={name:"1hjq20a",styles:"width:320px;"};function z(t){var e=t.items,n=Object(v.a)(),a=n.getListByKey("Page").fields.find((function(t){return"packageName"===t.path})).options.filter((function(t){return!e.filter((function(t){return t.packageName})).map((function(t){return t.packageName})).includes(t.value)})),s=T(Object(b.a)(m()(y())),1)[0];return Object(c.jsx)(d.c,null,(function(t){var e=t.history;return Object(c.jsx)(p.d,{columns:3,css:Object(i.a)({marginTop:2*o.d},""),gap:2*o.d},a.map((function(t){var a=t.value;return Object(c.jsx)(u.a,{key:a,css:A},Object(c.jsx)(l.d,{css:Object(i.a)({marginBottom:2*o.d},"")},a),Object(c.jsx)(f.a,{onClick:w(r.a.mark((function t(){var i,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({variables:{pkgName:a}});case 2:i=t.sent,c=i.data,e.push("".concat(n.adminPath,"/pages/").concat(c.createPage.id));case 5:case"end":return t.stop()}}),t)}))),css:Object(i.a)({marginRight:o.d},"")},"Create Page"))})))}))}var B={name:"1hjq20a",styles:"width:320px;"},I={name:"wlea3r",styles:"margin-bottom:2px;"},J={name:"1xd7azp",styles:"font-size:small;margin-top:0;margin-bottom:0;"};function _(t){var e=t.items,n=Object(v.a)();return Object(c.jsx)(s.Fragment,null,Object(c.jsx)(p.d,{columns:3,css:Object(i.a)({marginTop:2*o.d},""),gap:2*o.d},e.map((function(t){return Object(c.jsx)(u.a,{key:t.id,css:B},Object(c.jsx)("div",{css:Object(i.a)({marginBottom:2*o.d},"")},Object(c.jsx)(l.d,{css:I},t.pageTitle||t.packageName),t.packageName&&Object(c.jsx)("p",{css:J},"Package: ",t.packageName)),Object(c.jsx)(f.a,{to:"".concat(n.adminPath,"/pages/").concat(t.id),css:Object(i.a)({marginRight:o.d},"")},"Edit"))}))))}var q={name:"0",styles:""},K={name:"bgjnam",styles:"margin-bottom:320px;"};function E(){var t=Object(b.b)(m()(x()),{fetchPolicy:"cache-and-network"}),e=t.data,n=t.error,a=t.refetch;if(n)return Object(c.jsx)("p",null,"There was an error fetching data for the dashboard.");if(!e)return Object(c.jsx)(O.a,null);var r=e.allPages.filter((function(t){return"true"===t.isOrphaned}));return Object(c.jsx)(p.b,{css:q},Object(c.jsx)(l.c,null,"Pages"),Object(c.jsx)(_,{items:e.allPages}),r.length?Object(c.jsx)(s.Fragment,null,Object(c.jsx)(l.c,{css:Object(i.a)({marginTop:5*o.d,marginBottom:4*o.d},"")},"Orphaned Packages"),Object(c.jsx)(D,{refetch:a,items:r})):null,Object(c.jsx)(l.c,{css:Object(i.a)({marginTop:5*o.d,marginBottom:4*o.d},"")},"Undocumented Packages"),Object(c.jsx)(z,{items:e.allPages}),Object(c.jsx)("div",{css:K}))}var F=n(82);function L(t,e,n,a,r,i,c){try{var s=t[i](c),o=s.value}catch(t){return void n(t)}s.done?e(o):Promise.resolve(o).then(a,r)}function R(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function c(t){L(i,a,r,c,s,"next",t)}function s(t){L(i,a,r,c,s,"throw",t)}c(void 0)}))}}function U(){var t=Q(['\n\t\tmutation createNavigation($data: String!) {\n\t\t\tcreateSetting(data: { name: "navigation", value: $data }) {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t']);return U=function(){return t},t}function H(){var t=Q(['\n\t\tmutation updateNavigation($id: ID!, $data: String!) {\n\t\t\tupdateSetting(id: $id, data: { name: "navigation", value: $data }) {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t']);return H=function(){return t},t}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var c,s=t[Symbol.iterator]();!(a=(c=s.next()).done)&&(n.push(c.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(){var t=Q(['\n\t\t\tquery AllSettings {\n\t\t\t\tallSettings(where: { name: "navigation" }) {\n\t\t\t\t\tid\n\t\t\t\t\tname\n\t\t\t\t\tvalue\n\t\t\t\t}\n\t\t\t\tallPages {\n\t\t\t\t\tid\n\t\t\t\t\tname\n\t\t\t\t\t_label_\n\t\t\t\t\tpageTitle\n\t\t\t\t}\n\t\t\t}\n\t\t']);return M=function(){return t},t}function Q(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var V=function(t){return t?[{title:"Home",path:"/"},{title:"Accessibility",path:"/accessibility"},{title:"Design Tokens",path:"/tokens"},{title:"Downloads",path:"/downloads"},{title:"Components",children:t.map((function(t){return{title:t.pageTitle?t.pageTitle:t._label_,path:"/components/".concat(t.name)}}))}]:{}},W={name:"107g2h8",styles:"width:80%;padding:8px;font-size:1em;border-radius:4px;border:1px solid hsl(200,20%,70%);height:500px;resize:none;"};function X(){var t=Object(b.b)(m()(M()),{fetchPolicy:"cache-and-network"}),e=t.data,n=t.error,a=G(Object(b.a)(m()(H())),1)[0],i=G(Object(b.a)(m()(U())),1)[0],o=G(Object(s.useState)(!1),2),u=o[0],d=o[1];if(n)return Object(c.jsx)("p",null,"There was an error fetching data for the dashboard.");if(e){var g=e.allSettings,j=e.allPages;if(j&&g&&!u)if(g[0])d(g[0].value);else{var h=JSON.stringify(V(j),null,2);d(h)}}return u?Object(c.jsx)(p.b,null,Object(c.jsx)(l.c,null,"Settings"),Object(c.jsx)(F.a,null,Object(c.jsx)(F.d,{htmlFor:"navigation",field:{label:"Navigation",config:{}}}),Object(c.jsx)("textarea",{id:"navigation",css:W,name:"navigation",value:u,onChange:function(t){d(t.target.value)}})),Object(c.jsx)(f.a,{appearance:"primary",onClick:R(r.a.mark((function t(){var n,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,JSON.parse(u),t.next=8;break;case 4:return t.prev=4,t.t0=t.catch(0),alert("Invalid JSON"),t.abrupt("return",null);case 8:if(!e.allSettings[0]){t.next=14;break}return n=e.allSettings[0].id,t.next=12,a({variables:{id:n,data:u}});case 12:t.next=17;break;case 14:return c=JSON.stringify(V(e.allPages),null,2),t.next=17,i({variables:{data:c}});case 17:case"end":return t.stop()}}),t,null,[[0,4]])})))},"Save")):Object(c.jsx)(O.a,null)}e.default={pages:function(){return[{label:"Dashboard",path:"",component:E},{listKey:"Page"},{listKey:"User"},{listKey:"Image"},{label:"Settings",path:"settings",component:X}]}}}}]);